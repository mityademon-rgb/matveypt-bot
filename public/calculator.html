<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#f3f0f7" />

  <!-- –î–ª—è iOS -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="–ü–µ—Ä–≤—ã–π —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π">
  <link rel="apple-touch-icon" href="https://1tourtv.ru/wp-content/uploads/2025/08/icon192.png">

  <!-- –î–ª—è Android/Chrome -->
  <link rel="icon" sizes="192x192" href="https://1tourtv.ru/wp-content/uploads/2025/08/icon192.png">
  <meta name="mobile-web-app-capable" content="yes">

  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;800&display=swap" rel="stylesheet">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <title>–ü–µ—Ä–≤—ã–π —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π ‚Äî –º–µ–¥–∏–∞–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞</title>

  <style>
    :root{
      --brand:#f37021;
      --brand2:#ff8a3c;

      --bg1:#f7f3fb;
      --bg2:#f1f5ff;

      --card-bg:#ffffff;
      --card-border:#e3e0ee;
      --card-border-strong:#f295a6;

      --text-main:#2b2431;
      --text-sub:#756575;
      --chip-bg:#ffe2cf;
      --muted:#a09aa8;

      --accent-pink:#f973a8;
      --accent-soft:#ffe8f0;
    }

    *{box-sizing:border-box}
    html,body{height:100%}

    body{
      margin:0;
      background:linear-gradient(180deg,var(--bg1),var(--bg2));
      color:var(--text-main);
      font-family:'Montserrat',sans-serif;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    .page{
      max-width:980px;
      margin:0 auto;
      padding:12px 14px 110px;
    }

    /* === –®–∞–ø–∫–∞ / hero === */
    .hero{
      border-radius:22px;
      overflow:hidden;
      background:var(--card-bg);
      border:1px solid var(--card-border);
      box-shadow:0 14px 40px rgba(0,0,0,.06);
      margin-bottom:14px;
      display:flex;
      flex-direction:column;
    }
    .hero-top{
      position:relative;
      min-height:140px;
      background:
        linear-gradient(135deg,rgba(0,0,0,.15),rgba(0,0,0,.55)),
        url("https://1tourtv.ru/wp-content/uploads/2025/08/4e0a2987-fb6a-4eb7-9062-0d039549d6cd.jpg")
        center/cover no-repeat;
      color:#fff;
      display:flex;
      align-items:flex-end;
      padding:16px 16px 14px;
    }
    .hero-logo{
      width:40px;
      height:40px;
      border-radius:999px;
      background:rgba(255,255,255,.92);
      display:flex;
      align-items:center;
      justify-content:center;
      margin-right:10px;
      flex-shrink:0;
    }
    .hero-logo span{
      font-weight:900;
      font-size:16px;
      color:#111;
    }
    .hero-text{
      display:flex;
      flex-direction:column;
      gap:2px;
    }
    .hero-title{
      font-size:20px;
      font-weight:900;
    }
    .hero-sub{
      font-size:12px;
      opacity:.9;
      font-weight:600;
    }

    .hero-bottom{
      padding:10px 14px 12px;
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      justify-content:space-between;
    }
    .hero-chip{
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.08em;
      padding:5px 10px;
      border-radius:999px;
      background:#f4f1ff;
      color:#5b4d6a;
      font-weight:800;
      white-space:nowrap;
    }
    .hero-note{
      font-size:12px;
      color:#6e6472;
      font-weight:500;
      max-width:260px;
    }
    .hero-note-source{
      font-size:10px;
      color:#a6a0b0;
      margin-top:2px;
      line-height:1.3;
    }

    /* === –ú–∞–ª–µ–Ω—å–∫–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ === */
    .top-stats{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin-bottom:14px;
    }
    .stat-card{
      flex:1;
      min-width:160px;
      border-radius:18px;
      padding:12px 14px;
      background:var(--card-bg);
      border:1px solid var(--card-border);
      box-shadow:0 10px 26px rgba(0,0,0,.04);
      display:flex;
      flex-direction:column;
      gap:4px;
    }
    .stat-card__label{
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:.08em;
      color:#8a8091;
      font-weight:800;
    }
    .stat-card__value{
      font-size:22px;
      font-weight:900;
      color:var(--text-main);
    }
    .stat-card__sub{
      font-size:11px;
      color:var(--text-sub);
    }
    .stat-card__pill{
      display:inline-block;
      margin-top:4px;
      font-size:11px;
      padding:4px 8px;
      border-radius:999px;
      background:var(--chip-bg);
      color:#4b3424;
      font-weight:700;
      white-space:nowrap;
    }

    @media(max-width:640px){
      .stat-card{flex-basis:100%}
    }

    /* === –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—É === */
    .cta-calc{
      margin:6px 0 10px;
      display:flex;
      justify-content:center;
    }
    .cta-calc button{
      border:none;
      border-radius:999px;
      padding:10px 18px;
      font-weight:800;
      font-size:13px;
      background:linear-gradient(135deg,var(--brand),var(--brand2));
      color:#000;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:8px;
      box-shadow:0 8px 20px rgba(243,112,33,.35);
    }

    /* === –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –±—é–¥–∂–µ—Ç–∞ === */
    .calc-wrap{
      margin-top:4px;
      background:var(--card-bg);
      border-radius:22px;
      padding:18px 16px 20px;
      border:1px solid var(--card-border);
      box-shadow:0 14px 40px rgba(0,0,0,.06);
      color:var(--text-main);
    }

    .calc-header{
      display:flex;
      flex-direction:column;
      gap:4px;
      margin-bottom:10px;
    }
    .calc-title{
      font-size:18px;
      font-weight:900;
      color:var(--text-main);
    }
    .calc-subtitle{
      font-size:12px;
      color:var(--text-sub);
      font-weight:500;
    }

    .calc-section{
      background:#fff;
      border-radius:18px;
      padding:14px 12px 12px;
      margin-top:10px;
      border:1px solid #f0dde4;
      position:relative;
      overflow:hidden;
    }
    .calc-section-title{
      font-size:14px;
      font-weight:800;
      margin-bottom:8px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:8px;
      color:var(--text-main);
      position:relative;
      z-index:1;
    }
    .badge-step{
      font-size:10px;
      text-transform:uppercase;
      letter-spacing:.06em;
      padding:3px 9px;
      border-radius:999px;
      background:var(--accent-soft);
      color:var(--text-main);
      font-weight:800;
      flex-shrink:0;
    }

    .section-thumb{
      width:100%;
      border-radius:14px;
      overflow:hidden;
      height:120px;
      margin:-2px 0 10px;
      position:relative;
      z-index:0;
    }
    .section-thumb-img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }

    .package-card{
      background:#fff;
      border:1px solid #f0dde4;
      border-radius:14px;
      padding:12px;
      margin-bottom:8px;
      cursor:pointer;
      transition:all .2s;
      position:relative;
      box-shadow:0 4px 10px rgba(0,0,0,.02);
      z-index:1;
    }
    .package-card:last-child{margin-bottom:0}
    .package-card:active{transform:scale(0.985)}
    .package-card.selected{
      border-color:var(--card-border-strong);
      box-shadow:0 10px 24px rgba(252,142,163,.45);
      background:radial-gradient(circle at top left,rgba(252,196,214,.45),#ffffff);
    }
    .package-header{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:10px;
      margin-bottom:4px;
    }
    .package-name{
      font-size:16px;
      font-weight:900;
      text-transform:uppercase;
      color:var(--text-main);
    }
    .package-desc{
      font-size:12px;
      color:var(--text-sub);
      margin-top:1px;
    }
    .package-price{
      font-size:18px;
      font-weight:900;
      color:#e56045;
      white-space:nowrap;
    }
    .package-meta{
      font-size:11px;
      color:var(--muted);
      margin-top:3px;
    }

    .package-features{
      display:flex;
      flex-direction:column;
      gap:4px;
      margin-top:4px;
      font-size:11px;
      color:var(--text-main);
    }
    .feature{
      display:flex;
      align-items:flex-start;
      gap:5px;
    }
    .feature::before{
      content:'‚úì';
      font-size:12px;
      color:#16a34a;
      margin-top:1px;
      flex-shrink:0;
    }

    .checkbox-option{
      background:#fff;
      border:1px solid #f0dde4;
      border-radius:14px;
      padding:10px 11px;
      margin-bottom:8px;
      cursor:pointer;
      transition:all .2s;
      display:flex;
      align-items:center;
      gap:10px;
      box-shadow:0 3px 8px rgba(0,0,0,.02);
      z-index:1;
      position:relative;
    }
    .checkbox-option:last-child{margin-bottom:0}
    .checkbox-option:active{transform:scale(0.985)}
    .checkbox-option.selected{
      border-color:var(--card-border-strong);
      background:radial-gradient(circle at top left,rgba(252,196,214,.4),#ffffff);
      box-shadow:0 8px 18px rgba(252,142,163,.4);
    }

    .checkbox{
      width:20px;
      height:20px;
      border-radius:7px;
      border:1px solid #e4b6c4;
      display:flex;
      align-items:center;
      justify-content:center;
      flex-shrink:0;
      font-size:13px;
      color:var(--text-main);
      background:#fff;
    }
    .checkbox-option.selected .checkbox{
      background:var(--accent-pink);
      border-color:var(--accent-pink);
      color:#fff;
    }
    .checkbox-option.selected .checkbox::after{
      content:'‚úì';
      font-weight:800;
    }

    .option-content{
      flex:1;
      min-width:0;
    }
    .option-text{
      font-size:13px;
      font-weight:800;
      color:var(--text-main);
    }
    .option-subtitle{
      font-size:11px;
      color:var(--text-sub);
      margin-top:1px;
    }
    .price-badge{
      font-size:13px;
      font-weight:800;
      color:#e56045;
      white-space:nowrap;
    }

    .total-box{
      margin-top:12px;
      background:#fff;
      border-radius:18px;
      padding:12px 12px 11px;
      border:1px solid var(--card-border-strong);
      box-shadow:0 6px 16px rgba(0,0,0,.06);
      color:var(--text-main);
    }
    .total-row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .total-label{
      font-size:12px;
      color:var(--text-sub);
      font-weight:700;
    }
    .total-amount{
      font-size:22px;
      font-weight:900;
      color:#e56045;
      white-space:nowrap;
    }
    .total-breakdown{
      margin-top:6px;
      font-size:11px;
      color:var(--text-main);
      line-height:1.45;
    }
    .total-breakdown.empty{
      opacity:.9;
      font-style:italic;
      color:var(--text-sub);
    }

    .total-note{
      margin-top:5px;
      font-size:10px;
      color:var(--muted);
    }

    .footer-actions{
      position:fixed;
      left:0;
      right:0;
      bottom:0;
      padding:8px 10px 10px;
      background:rgba(248,247,253,.96);
      border-top:1px solid #d5d1e4;
      backdrop-filter:blur(14px);
      z-index:50;
    }
    .footer-inner{
      max-width:980px;
      margin:0 auto;
      display:flex;
      gap:8px;
    }
    .btn-ghost{
      flex:1;
      border-radius:999px;
      padding:11px 14px;
      font-size:13px;
      font-weight:800;
      border:none;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:6px;
      white-space:nowrap;
      background:#ffffff;
      color:#6e6472;
      border:1px solid #d5d1e4;
    }

    @media (max-width:640px){
      .page{padding-bottom:120px}
      .footer-inner{flex-direction:row}
      .total-amount{font-size:20px}
    }
  </style>
</head>
<body>
  <div class="page">

    <section class="hero">
      <div class="hero-top">
        <div class="hero-logo"><span>TV</span></div>
        <div class="hero-text">
          <div class="hero-title">–ü–µ—Ä–≤—ã–π —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π</div>
          <div class="hero-sub">–ú–µ–¥–∏–∞–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π –∏ —Ä–µ–∫–ª–∞–º—ã</div>
        </div>
      </div>
      <div class="hero-bottom">
        <div class="hero-chip">–≠—Ñ–∏—Ä, –æ—Ç–µ–ª–∏, IPTV, —Å–æ—Ü—Å–µ—Ç–∏, –ø–∞—Ä—Ç–Ω—ë—Ä—ã</div>
        <div class="hero-note">
          Live-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.
          <div class="hero-note-source">
            –ø–æ –¥–∞–Ω–Ω—ã–º —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞, Mediascope, –Ø–Ω–¥–µ–∫—Å, IPTV-–æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
          </div>
        </div>
      </div>
    </section>

    <section class="top-stats">
      <div class="stat-card">
        <div class="stat-card__label">–°–ï–ô–ß–ê–° –°–ú–û–¢–†–Ø–¢</div>
        <div class="stat-card__value" id="nowWatch">0</div>
        <div class="stat-card__sub">
          –∑—Ä–∏—Ç–µ–ª–µ–π –Ω–∞ –≤—Å–µ—Ö –Ω–æ—Å–∏—Ç–µ–ª—è—Ö
          <div class="stat-card__pill">
           –û—Ç–µ–ª–∏:–¢—É—Ä—Ü–∏—è: <span id="turWatch">0</span> ‚Ä¢ –†–æ—Å—Å–∏—è: <span id="rusWatch">0</span>
          </div>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-card__label">–ê–£–î–ò–¢–û–†–ò–Ø –í –ú–ï–°–Ø–¶</div>
        <div class="stat-card__value" id="bigStatNum">0</div>
        <div class="stat-card__sub">
          –¢–í, –æ—Ç–µ–ª–∏, IPTV, —Å–æ—Ü—Å–µ—Ç–∏ –∏ –ø–∞—Ä—Ç–Ω—ë—Ä—ã
        </div>
      </div>
    </section>

    <div class="cta-calc">
      <button type="button" id="toCalcBtn">
        üí∞ –ü–µ—Ä–µ–π—Ç–∏ –∫ —Ä–∞—Å—á—ë—Ç—É –∫–∞–º–ø–∞–Ω–∏–∏
      </button>
    </div>

    <section class="calc-wrap" id="calculator">
      <div class="calc-header">
        <div class="calc-title">–°–æ–±–µ—Ä–∏—Ç–µ –∫–∞–º–ø–∞–Ω–∏—é –ø–æ–¥ –≤–∞—à–∏ –∑–∞–¥–∞—á–∏</div>
        <div class="calc-subtitle">
          –°–Ω–∞—á–∞–ª–∞ —Ä–µ—à–∞–µ–º –≤–æ–ø—Ä–æ—Å —Å —Ä–æ–ª–∏–∫–æ–º, –¥–æ–±–∞–≤–ª—è–µ–º –±–ª–æ–≥–µ—Ä–æ–≤ –∏ –≤ –∫–æ–Ω—Ü–µ –≤—ã–±–∏—Ä–∞–µ–º –ø–∞–∫–µ—Ç –º–∏–Ω—É—Ç –≤ —ç—Ñ–∏—Ä–µ.
        </div>
      </div>

      <div class="calc-section">
        <div class="calc-section-title">
          <span>–†–æ–ª–∏–∫ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ</span>
          <span class="badge-step">—à–∞–≥ 1</span>
        </div>

        <div class="section-thumb">
          <img class="section-thumb-img" src="https://1tourtv.ru/wp-content/uploads/2025/09/photo_2025-09-09_12-13-45.jpg" alt="–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ —Ä–æ–ª–∏–∫–∞">
        </div>

        <div class="checkbox-option" data-type="production" data-value="base" data-price="50000">
          <div class="checkbox"></div>
          <div class="option-content">
            <div class="option-text">–†–æ–ª–∏–∫ –∏–∑ –≤–∞—à–∏—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤</div>
            <div class="option-subtitle">–î–æ 60 —Å–µ–∫: –º–æ–Ω—Ç–∞–∂, —Ç–∏—Ç—Ä—ã, –ª–æ–≥–æ—Ç–∏–ø—ã</div>
          </div>
          <div class="price-badge">50 000 ‚ÇΩ</div>
        </div>

        <div class="checkbox-option" data-type="production" data-value="shoot-msk" data-price="150000">
          <div class="checkbox"></div>
          <div class="option-content">
            <div class="option-text">–°—ä—ë–º–∫–∞ –≤ –ú–æ—Å–∫–≤–µ</div>
            <div class="option-subtitle">–û–ø–µ—Ä–∞—Ç–æ—Ä + —Ä–µ–∂–∏—Å—Å—ë—Ä, –≤—ã–µ–∑–¥–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞</div>
          </div>
          <div class="price-badge">+150 000 ‚ÇΩ</div>
        </div>

        <div class="checkbox-option" data-type="production" data-value="shoot-region" data-price="200000">
          <div class="checkbox"></div>
          <div class="option-content">
            <div class="option-text">–°—ä—ë–º–∫–∞ –≤ —Ä–µ–≥–∏–æ–Ω–µ / –Ω–∞ –∫—É—Ä–æ—Ä—Ç–µ</div>
            <div class="option-subtitle">–° —É—á—ë—Ç–æ–º –¥–æ—Ä–æ–≥–∏ –∏ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã</div>
          </div>
          <div class="price-badge">+200 000 ‚ÇΩ</div>
        </div>

        <div class="checkbox-option" data-type="production" data-value="voice" data-price="20000">
          <div class="checkbox"></div>
          <div class="option-content">
            <div class="option-text">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –æ–∑–≤—É—á–∫–∞</div>
            <div class="option-subtitle">–î–∏–∫—Ç–æ—Ä—Å–∫–∏–π –≥–æ–ª–æ—Å –ø–æ–¥ —Å—Ç–∏–ª—å –±—Ä–µ–Ω–¥–∞</div>
          </div>
          <div class="price-badge">+20 000 ‚ÇΩ</div>
        </div>

        <div class="checkbox-option" data-type="production" data-value="graphics" data-price="20000">
          <div class="checkbox"></div>
          <div class="option-content">
            <div class="option-text">–ì—Ä–∞—Ñ–∏–∫–∞ –∏ –∞–Ω–∏–º–∞—Ü–∏—è</div>
            <div class="option-subtitle">–î–æ 10 —Å–µ–∫—É–Ω–¥ —Ñ–∏—Ä–º–µ–Ω–Ω–æ–π –∞–Ω–∏–º–∞—Ü–∏–∏</div>
          </div>
          <div class="price-badge">+20 000 ‚ÇΩ</div>
        </div>

        <div class="checkbox-option" data-type="production" data-value="creative" data-price="50000">
          <div class="checkbox"></div>
          <div class="option-content">
            <div class="option-text">–ö—Ä–µ–∞—Ç–∏–≤ –∏ —Å—Ü–µ–Ω–∞—Ä–∏–π</div>
            <div class="option-subtitle">–ü—Ä–æ–¥—é—Å–µ—Ä + —Å—Ü–µ–Ω–∞—Ä–∏—Å—Ç, —á—Ç–æ–±—ã —ç—Ç–æ —Å–º–æ—Ç—Ä–µ–ª–∏</div>
          </div>
          <div class="price-badge">+50 000 ‚ÇΩ</div>
        </div>

        <div class="checkbox-option" data-type="production" data-value="actors" data-price="100000">
          <div class="checkbox"></div>
          <div class="option-content">
            <div class="option-text">–ê–∫—Ç—ë—Ä—ã –∏ –≤–µ–¥—É—â–∏–µ</div>
            <div class="option-subtitle">–ö–∞—Å—Ç–∏–Ω–≥, –ø–æ–¥–±–æ—Ä –∏ —Å—ä—ë–º–∫–∞ —Å —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏</div>
          </div>
          <div class="price-badge">+100 000 ‚ÇΩ</div>
        </div>
      </div>

      <div class="calc-section">
        <div class="calc-section-title">
          <span>–ë–ª–æ–≥–µ—Ä—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞</span>
          <span class="badge-step">—à–∞–≥ 2</span>
        </div>

        <div class="section-thumb">
          <img class="section-thumb-img" src="https://1tourtv.ru/wp-content/uploads/2025/09/2025-09-21-16.23.45.jpg" alt="–ë–ª–æ–≥–µ—Ä—ã">
        </div>

        <div class="checkbox-option" data-type="blogger" data-value="top" data-price="150000">
          <div class="checkbox"></div>
          <div class="option-content">
            <div class="option-text">–¢–û–ü-–±–ª–æ–≥–µ—Ä</div>
            <div class="option-subtitle">–û—Ç 50 000 –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤, —Ñ–æ—Ä–º–∞—Ç "—Ä–µ–∞–ª—å–Ω—ã–π –æ–ø—ã—Ç"</div>
          </div>
          <div class="price-badge">150 000 ‚ÇΩ</div>
        </div>

        <div class="checkbox-option" data-type="blogger" data-value="mega" data-price="300000">
          <div class="checkbox"></div>
          <div class="option-content">
            <div class="option-text">–ú–ï–ì–ê-–±–ª–æ–≥–µ—Ä</div>
            <div class="option-subtitle">–û—Ç 300 000 –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤, –æ—Ç–¥–µ–ª—å–Ω—ã–π –≤—ã–ø—É—Å–∫</div>
          </div>
          <div class="price-badge">300 000 ‚ÇΩ</div>
        </div>

        <div class="checkbox-option" data-type="blogger" data-value="super" data-price="600000">
          <div class="checkbox"></div>
          <div class="option-content">
            <div class="option-text">–°–£–ü–ï–†-–±–ª–æ–≥–µ—Ä</div>
            <div class="option-subtitle">–§–µ–¥–µ—Ä–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å + –∫—Ä–æ—Å—Å-–ø–æ—Å—Ç–∏–Ω–≥ –Ω–∞ –Ω–∞—à–∏ –ø–ª–æ—â–∞–¥–∫–∏</div>
          </div>
          <div class="price-badge">600 000 ‚ÇΩ</div>
        </div>
      </div>

      <div class="calc-section" id="section-packages">
        <div class="calc-section-title">
          <span>–ü–∞–∫–µ—Ç –º–∏–Ω—É—Ç –∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ</span>
          <span class="badge-step">—à–∞–≥ 3</span>
        </div>

        <div class="package-card" data-type="package" data-value="MINI" data-price="450000">
          <div class="package-header">
            <div>
              <div class="package-name">MINI</div>
              <div class="package-desc">–°—Ç–∞—Ä—Ç, –∫–æ–≥–¥–∞ –≤—ã —Ç–æ–ª—å–∫–æ –ø—Ä–æ–±—É–µ—Ç–µ –ø–ª–æ—â–∞–¥–∫—É.</div>
              <div class="package-meta">10 –¥–Ω–µ–π ‚Ä¢ —ç—Ñ–∏—Ä + —Å–∞–π—Ç ‚Ä¢ –¥–æ 10 –º–∏–Ω—É—Ç –≤ —Ä–æ—Ç–∞—Ü–∏–∏</div>
            </div>
            <div class="package-price">450 000 ‚ÇΩ</div>
          </div>
          <div class="package-features">
            <div class="feature">–ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ –≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–Ω–µ–π</div>
            <div class="feature">–†–æ—Ç–∞—Ü–∏—è –≤ —ç—Ñ–∏—Ä–µ + –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–∞ —Å–∞–π—Ç–µ</div>
            <div class="feature">–û—Ç—á—ë—Ç –ø–æ –ø–æ–∫–∞–∑–∞–º –∏ –≤—ã—Ö–æ–¥–∞–º</div>
          </div>
        </div>

        <div class="package-card" data-type="package" data-value="HIT" data-price="600000">
          <div class="package-header">
            <div>
              <div class="package-name">HIT</div>
              <div class="package-desc">–ë–∞–ª–∞–Ω—Å –æ—Ö–≤–∞—Ç–∞ –∏ —á–∞—Å—Ç–æ—Ç—ã ‚Äî –≤–∞—Å –∑–∞–ø–æ–º–∏–Ω–∞—é—Ç.</div>
              <div class="package-meta">20 –¥–Ω–µ–π ‚Ä¢ —ç—Ñ–∏—Ä + —Å–∞–π—Ç + —Å–æ—Ü—Å–µ—Ç–∏ ‚Ä¢ ~15 –º–∏–Ω—É—Ç –≤ –ø–∞–∫–µ—Ç–µ</div>
            </div>
            <div class="package-price">600 000 ‚ÇΩ</div>
          </div>
          <div class="package-features">
            <div class="feature">–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ö–æ–¥—ã –≤ —ç—Ñ–∏—Ä–µ –≤ —Ç–µ—á–µ–Ω–∏–µ 3 –Ω–µ–¥–µ–ª—å</div>
            <div class="feature">–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤ —Å–æ—Ü—Å–µ—Ç—è—Ö –∫–∞–Ω–∞–ª–∞</div>
            <div class="feature">–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —á–∞—Å—Ç–æ—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞</div>
          </div>
        </div>

        <div class="package-card" data-type="package" data-value="OPTIMA" data-price="900000">
          <div class="package-header">
            <div>
              <div class="package-name">OPTIMA</div>
              <div class="package-desc">–ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ "—Ä–∞—Å–∫–∞—á–∞—Ç—å" –±—Ä–µ–Ω–¥ –∏ —Å–æ–±—Ä–∞—Ç—å –º–∞–∫—Å–∏–º—É–º –≤–Ω–∏–º–∞–Ω–∏—è.</div>
              <div class="package-meta">30 –¥–Ω–µ–π ‚Ä¢ —ç—Ñ–∏—Ä + —Å–∞–π—Ç + —Å–æ—Ü—Å–µ—Ç–∏ + –ø–∞—Ä—Ç–Ω—ë—Ä—ã ‚Ä¢ ~30 –º–∏–Ω—É—Ç</div>
            </div>
            <div class="package-price">900 000 ‚ÇΩ</div>
          </div>
          <div class="package-features">
            <div class="feature">–ú–µ—Å—è—Ü —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏—è</div>
            <div class="feature">–ö—Ä–æ—Å—Å-–ø—Ä–æ–º–æ –Ω–∞ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–∏—Ö –ø–ª–æ—â–∞–¥–∫–∞—Ö</div>
            <div class="feature">–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å–ø–µ—Ü—Ä—É–±—Ä–∏–∫–∏</div>
          </div>
        </div>

        <div class="package-card" data-type="package" data-value="PRO" data-price="1500000">
          <div class="package-header">
            <div>
              <div class="package-name">PRO</div>
              <div class="package-desc">–ò—Å—Ç–æ—Ä–∏—è "–º—ã –∑–¥–µ—Å—å –Ω–∞–¥–æ–ª–≥–æ": —Å–ø–µ—Ü–ø—Ä–æ–µ–∫—Ç –ø–æ–¥ –≤–∞—Å.</div>
              <div class="package-meta">–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Å—Ä–æ–∫–∏ ‚Ä¢ –≤—Å–µ –Ω–æ—Å–∏—Ç–µ–ª–∏ ‚Ä¢ ~45 –º–∏–Ω—É—Ç</div>
            </div>
            <div class="package-price">1 500 000 ‚ÇΩ</div>
          </div>
          <div class="package-features">
            <div class="feature">–°–ø–µ—Ü–ø—Ä–æ–µ–∫—Ç –ø–æ–¥ –∑–∞–¥–∞—á–∏ –±—Ä–µ–Ω–¥–∞</div>
            <div class="feature">–ì–∏–±–∫–∏–π –º–µ–¥–∏–∞–ø–ª–∞–Ω, –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –ø–æ —Ö–æ–¥—É –∫–∞–º–ø–∞–Ω–∏–∏</div>
            <div class="feature">–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø—Ä–æ–¥—é—Å–µ—Ä –ø—Ä–æ–µ–∫—Ç–∞</div>
          </div>
        </div>
      </div>

      <div class="total-box">
        <div class="total-row">
          <div class="total-label">–ò—Ç–æ–≥–æ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω–æ:</div>
          <div class="total-amount" id="totalAmount">0 ‚ÇΩ</div>
        </div>
        <div class="total-breakdown empty" id="breakdown">
          –ü–æ–∫–∞ –Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ ‚Äî –æ—Ç–º–µ—Ç—å—Ç–µ –Ω—É–∂–Ω—ã–µ –æ–ø—Ü–∏–∏, –∏ –∑–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–π –±—é–¥–∂–µ—Ç.
        </div>
        <div class="total-note">
          –ò—Ç–æ–≥–æ–≤–∞—è —Å–º–µ—Ç–∞ —É—Ç–æ—á–Ω—è–µ—Ç—Å—è –ø—Ä–æ–¥—é—Å–µ—Ä–æ–º: –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –Ω–æ—Å–∏—Ç–µ–ª–∏ –∏ –∞–∫—Ü–µ–Ω—Ç—ã.
        </div>
      </div>
    </section>
  </div>

  <div class="footer-actions">
    <div class="footer-inner">
      <button class="btn-ghost" type="button" id="backToChatBtn">
        ‚¨Ö –ù–∞–∑–∞–¥ –≤ Telegram
      </button>
    </div>
  </div>

  <script>
   const tg = window.Telegram ? window.Telegram.WebApp : null;

if (tg) {
  tg.ready();
  tg.expand();
  tg.MainButton.setText('–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–¥—é—Å–µ—Ä—É ‚Äî –æ–Ω —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏');
  tg.MainButton.hide();
}

const fmt = n => (n).toLocaleString('ru-RU');

// –ê–Ω–∏–º–∞—Ü–∏—è –º–µ—Å—è—á–Ω–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏
(function(){
  const el = document.getElementById('bigStatNum');
  let val = 0;
  const target = 1200000;
  const step = Math.round(target / 80);
  const timer = setInterval(()=>{
    val += step;
    if (val >= target){
      val = target;
      clearInterval(timer);
    }
    el.textContent = fmt(val);
  }, 40);
})();

// –û–Ω–ª–∞–π–Ω-—Ü–∏—Ñ—Ä—ã
(function(){
  const elNow = document.getElementById('nowWatch');
  const elTur = document.getElementById('turWatch');
  const elRus = document.getElementById('rusWatch');
  const rnd = (min,max)=>Math.floor(Math.random()*(max-min+1))+min;

  let now = 186540, tur = 72300, rus = 45200;

  function paint(){
    elNow.textContent = fmt(now);
    elTur.textContent = fmt(tur);
    elRus.textContent = fmt(rus);
  }

  paint();

  setInterval(()=>{
    const step = Math.max(200, Math.round(now*(Math.random()*0.012+0.004)));
    now = Math.max(60000, Math.min(350000, now + (Math.random()<.5 ? -step : step)));
    const tStep = rnd(300, 2400);
    const rStep = rnd(300, 1800);
    tur = Math.max(20000, Math.min(120000, tur + (Math.random()<.5 ? -tStep : tStep)));
    rus = Math.max(10000, Math.min(100000, rus + (Math.random()<.5 ? -rStep : rStep)));
  }, 7000);

  setInterval(paint, 1500);
})();

// –°–∫—Ä–æ–ª–ª –∫ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—É
const toCalcBtn = document.getElementById('toCalcBtn');
const calcSection = document.getElementById('calculator');

function scrollToCalc(){
  calcSection.scrollIntoView({behavior:'smooth',block:'start'});
  if (tg) {
    try { tg.HapticFeedback && tg.HapticFeedback.impactOccurred('light'); } catch(e){}
  }
}

toCalcBtn.addEventListener('click', scrollToCalc);

// –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥"
const backToChatBtn = document.getElementById('backToChatBtn');
backToChatBtn.addEventListener('click', ()=>{
  if (tg) {
    try { tg.HapticFeedback && tg.HapticFeedback.impactOccurred('light'); } catch(e){}
    tg.close();
  } else {
    window.history.back();
  }
});

// –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
const totalEl = document.getElementById('totalAmount');
const breakdownEl = document.getElementById('breakdown');

let selected = {
  package: null,
  production: [],
  blogger: null
};

function calculateTotal(){
  let total = 0;
  const parts = [];

  if (selected.production.length){
    const prodTotal = selected.production.reduce((sum,p)=>sum+p.price,0);
    total += prodTotal;
    parts.push(`–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ (${(prodTotal/1000).toFixed(0)} —Ç‚ÇΩ: ${selected.production.map(p=>p.name).join(', ')})`);
  }

  if (selected.blogger){
    total += selected.blogger.price;
    parts.push(`–ë–ª–æ–≥–µ—Ä (${(selected.blogger.price/1000).toFixed(0)} —Ç‚ÇΩ: ${selected.blogger.name})`);
  }

  if (selected.package){
    total += selected.package.price;
    parts.push(`–ü–∞–∫–µ—Ç ${selected.package.name} (${(selected.package.price/1000).toFixed(0)} —Ç‚ÇΩ)`);
  }

  if (!selected.package && !selected.production.length && !selected.blogger){
    totalEl.textContent = '0 ‚ÇΩ';
    breakdownEl.classList.add('empty');
    breakdownEl.textContent = '–ü–æ–∫–∞ –Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ ‚Äî –æ—Ç–º–µ—Ç—å—Ç–µ –Ω—É–∂–Ω—ã–µ –æ–ø—Ü–∏–∏, –∏ –∑–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–π –±—é–¥–∂–µ—Ç.';
    if (tg) tg.MainButton.hide();
    return 0;
  }

  totalEl.textContent = total.toLocaleString('ru-RU') + ' ‚ÇΩ';
  breakdownEl.classList.remove('empty');
  breakdownEl.textContent = parts.join(' + ');

  if (tg){
    tg.MainButton.show();
  }

  return total;
}

// –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ
document.querySelectorAll('[data-type="production"]').forEach(option=>{
  option.addEventListener('click', ()=>{
    option.classList.toggle('selected');

    const name = option.querySelector('.option-text').textContent.trim();
    const price = parseInt(option.dataset.price,10);

    if (option.classList.contains('selected')){
      selected.production.push({name,price});
    } else {
      selected.production = selected.production.filter(p=>p.name!==name);
    }

    if (tg){
      try { tg.HapticFeedback && tg.HapticFeedback.impactOccurred('light'); } catch(e){}
    }
    calculateTotal();
  });
});

// –ë–ª–æ–≥–µ—Ä—ã
document.querySelectorAll('[data-type="blogger"]').forEach(option=>{
  option.addEventListener('click', ()=>{
    const already = option.classList.contains('selected');
    document.querySelectorAll('[data-type="blogger"]').forEach(o=>o.classList.remove('selected'));

    if (already){
      selected.blogger = null;
    } else {
      option.classList.add('selected');
      const name = option.querySelector('.option-text').textContent.trim();
      const price = parseInt(option.dataset.price,10);
      selected.blogger = {name,price};
    }

    if (tg){
      try { tg.HapticFeedback && tg.HapticFeedback.impactOccurred('light'); } catch(e){}
    }
    calculateTotal();
  });
});

// –ü–∞–∫–µ—Ç—ã
document.querySelectorAll('[data-type="package"]').forEach(card=>{
  card.addEventListener('click', ()=>{
    document.querySelectorAll('[data-type="package"]').forEach(c=>c.classList.remove('selected'));
    card.classList.add('selected');

    selected.package = {
      name: card.dataset.value,
      price: parseInt(card.dataset.price,10)
    };

    if (tg){
      try { tg.HapticFeedback && tg.HapticFeedback.impactOccurred('light'); } catch(e){}
    }
    calculateTotal();
  });
});

// MainButton ‚Äî –î–£–ë–õ–ò–†–û–í–ê–ù–ù–ê–Ø –û–¢–ü–†–ê–í–ö–ê
if (tg){
  tg.MainButton.onClick(async ()=>{
    // –ë–õ–û–ö–ò–†–£–ï–ú –ö–ù–û–ü–ö–£
    tg.MainButton.showProgress();
    tg.MainButton.disable();
    
    console.log('üî• MainButton –Ω–∞–∂–∞—Ç–∞!');
    
    try { 
      tg.HapticFeedback && tg.HapticFeedback.notificationOccurred('success'); 
    } catch(e){}

    const payload = {
      type: 'budget_calc',
      package: selected.package ? selected.package.name : null,
      packagePrice: selected.package ? selected.package.price : 0,
      production: selected.production.map(p=>p.name),
      productionPrice: selected.production.reduce((sum,p)=>sum+p.price,0),
      blogger: selected.blogger ? selected.blogger.name : null,
      bloggerPrice: selected.blogger ? selected.blogger.price : 0,
      total: calculateTotal(),
      chatId: tg.initDataUnsafe?.user?.id || null
    };

    console.log('üì¶ Payload:', JSON.stringify(payload));
    
    // –°–ü–û–°–û–ë 1: Telegram sendData (–º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å)
    try {
      tg.sendData(JSON.stringify(payload));
      console.log('‚úÖ Telegram sendData() –≤—ã–∑–≤–∞–Ω');
    } catch(e) {
      console.warn('‚ö†Ô∏è sendData –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª:', e);
    }

    // –°–ü–û–°–û–ë 2: HTTP POST –Ω–∞ –Ω–∞—à —Å–µ—Ä–≤–µ—Ä (–ù–ê–î–Å–ñ–ù–´–ô!)
    try {
      const response = await fetch('/api/budget', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(payload)
      });

      const result = await response.json();
      console.log('‚úÖ HTTP POST —É—Å–ø–µ—à–µ–Ω:', result);

      if (result.success) {
        // –ó–ê–ö–†–´–í–ê–ï–ú –ß–ï–†–ï–ó 500ms
        setTimeout(() => {
          console.log('üö™ –ó–∞–∫—Ä—ã–≤–∞–µ–º WebApp');
          tg.close();
        }, 500);
      } else {
        throw new Error('Server returned error');
      }

    } catch(e) {
      console.error('‚ùå HTTP POST failed:', e);
      
      // –ü–û–ö–ê–ó–´–í–ê–ï–ú –£–í–ï–î–û–ú–õ–ï–ù–ò–ï
      tg.MainButton.hideProgress();
      tg.MainButton.enable();
      
      tg.showAlert('‚úÖ –†–∞—Å—á—ë—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω! –ü—Ä–æ–¥—é—Å–µ—Ä —Å–∫–æ—Ä–æ —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏.');
      
      // –ó–∞–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 2 —Å–µ–∫
      setTimeout(() => {
        tg.close();
      }, 2000);
    }
  });
}

}
  </script>
</body>
</html>

